metadata:
  image_version: 0.1.0
  hanami_version: 1.3.1
  hanami_model_version: 1.3.2
  # other_gems:
  # - 'hanami-webconsole'
  # - dotenv
builds:
  2.6.4:
    alpine3.9:
      hm:
        tags:
          - '2.6.4-alpine3.9'
          - '2.6.4-alpine39-hm'
          - '2.6.4-alpine39'
          - '2.6.4-alpine-hm'
          - '2.6.4-alpine'
          - '2.6-alpine3.9-hm'
          - '2.6-alpine3.9'
          - '2.6-alpine39-hm'
          - '2.6-alpine39'
          - '2.6-alpine-hm'
          - '2.6-alpine'
          - '2-alpine3.9-hm'
          - '2-alpine3.9'
          - '2-alpine39-hm'
          - '2-alpine39'
          - '2-alpine-hm'
          - '2-alpine'
          - 'alpine3.9-hm'
          - 'alpine3.9'
          - 'alpine39-hm'
          - 'alpine39'
          - 'alpine-hm'
          - 'alpine'
      no-hm:
        tags:
          - '2.6.4-alpine3.9-no-hm'
          - '2.6.4-alpine39-no-hm'
          - '2.6.4-alpine-no-hm'
          - '2.6-alpine3.9-no-hm'
          - '2.6-alpine39-no-hm'
          - '2.6-alpine-no-hm'
          - '2-alpine3.9-no-hm'
          - '2-alpine39-no-hm'
          - '2-alpine-no-hm'
          - 'alpine3.9-no-hm'
          - 'alpine39-no-hm'
          - 'alpine-no-hm'
    stretch:
      hm:
        actual_latest: true
        tags:
          - '2.6.4-stretch-hm'
          - '2.6.4-stretch'
          - '2.6.4-hm'
          - '2.6.4'
          - '2.6-stretch-hm'
          - '2.6-stretch'
          - '2.6-hm'
          - '2.6'
          - '2-stretch-hm'
          - '2-stretch'
          - '2-hm'
          - '2'
          - 'stretch-hm'
          - 'stretch'
          - 'hm'
      no-hm:
        tags:
          - '2.6.4-no-hm'
          - '2.6-stretch-no-hm'
          - '2.6-no-hm'
          - '2-stretch-no-hm'
          - '2-no-hm'
          - 'stretch-no-hm'
          - 'no-hm'
    slim-stretch:
      hm:
        tags:
          - '2.6.4-slim-stretch'
          - '2.6-slim-stretch-hm'
          - '2.6-slim-stretch'
          - '2-slim-stretch-hm'
          - '2-slim-stretch'
          - 'slim-stretch-hm'
          - 'slim-stretch'
      no-hm:
        tags:
          - '2.6-slim-stretch-no-hm'
          - '2-slim-stretch-no-hm'
          - 'slim-stretch-no-hm'
  2.5.6:
    alpine3.9:
      hm:
        tags:
          - '2.5.6-alpine3.9'
          - '2.5.6-alpine39-hm'
          - '2.5.6-alpine39'
          - '2.5.6-alpine-hm'
          - '2.5.6-alpine'
          - '2.5-alpine3.9-hm'
          - '2.5-alpine3.9'
          - '2.5-alpine39-hm'
          - '2.5-alpine39'
          - '2.5-alpine-hm'
          - '2.5-alpine'
      no-hm:
        tags:
          - '2.5.6-alpine39-no-hm'
          - '2.5.6-alpine-no-hm'
          - '2.5-alpine3.9-no-hm'
          - '2.5-alpine39-no-hm'
          - '2.5-alpine-no-hm'
    stretch:
      hm:
        tags:
          - '2.5.6-stretch'
          - '2.5-stretch-hm'
          - '2.5-stretch'
      no-hm:
        tags:
          - '2.5-stretch-no-hm'
    slim-stretch:
      hm:
        tags:
          - '2.5.6-slim-stretch'
          - '2.5-slim-stretch-hm'
          - '2.5-slim-stretch'
      no-hm:
        tags:
          - '2.5-slim-stretch-no-hm'

# Handy if hacky build snippet; adjust as appropriate:
#
#   versions = ['2.6.4-', '2.6-', '2-', '']
#   oses = ['stretch-', '']
#   hms = ['hm', '']
#   hm_tags = versions.map do |version|
#     oses.map do |os|
#       hms.map do |hm|
#         "- '#{version}#{os}#{hm}'".sub(/\-'$/, "'")
#       end
#     end
#   end.flatten
#   hms = ['no-hm']
#   no_hm_tags = versions.map do |version|
#     oses.map do |os|
#       hms.map do |hm|
#         "- '#{version}#{os}#{hm}'".sub(/\-'$/, "'")
#       end
#     end
#   end.flatten
#
# Remember that the first entry in `hm_tags` (or `hm_no_tags`) will always be
# the base tag of the image.
